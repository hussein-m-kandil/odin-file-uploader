<!DOCTYPE html>
<html lang="en">
  <head>
    <%- include('partials/meta', { title }) %>
  </head>
  <body>
    <%- include('partials/navbar') %>
    <div class="container mt-4">
      <%- include('partials/alert') %>
      <nav aria-label="breadcrumb">
        <ol class="breadcrumb">
          <% if (!locals.file) { %>
          <li class="breadcrumb-item active" aria-current="page">MyFiles</li>
          <% } else { %>
          <li class="breadcrumb-item" aria-current="page">
            <a href="/files">MyFiles</a>
          </li>
          <% if (Array.isArray(locals.parents) && parents.length > 0) { %>
          <!-- prettier-ignore -->
          <% for (let i = parents.length - 1; i > -1; i--) { %>
          <li class="breadcrumb-item" aria-current="page">
            <a href="/files/<%= parents[i].id %>"><%= parents[i].name %></a>
          </li>
          <% } %>
          <!-- prettier-ignore -->
          <% } %>
          <li class="breadcrumb-item active" aria-current="page">
            <%= file.name %>
          </li>
          <% } %>
        </ol>
      </nav>
      <!-- prettier-ignore -->
      <% if (Array.isArray(locals.files) && files.length > 0) { %>
      <!-- prettier-ignore -->
      <ul class="list-group">
        <%files.forEach((file) => { %>
          <li  class="list-group-item d-flex justify-content-between align-items-center">
            <a href="/files/<%= file.id %>"><%= file.name %></a>
            <span>
              <a href="<%= `${baseUrl}/${file.id}/rename` %>" role="button" class="btn btn-sm btn-outline-primary me-1">Update</a>
              <a href="<%= `${baseUrl}/${file.id}/delete` %>" role="button" class="btn btn-sm btn-outline-danger ms-1">Delete</a>
            </span>
          </li>
        <% }) %>
      </ul>
      <% } else { %>
      <p class="text-center text-body-secondary">
        There are no files or folders here! Consider
        <a href="<%= url %>/create">creating a folder</a> or
        <a href="<%= url %>/upload">uploading a file</a>
      </p>
      <% } %>
    </div>
  </body>
</html>
